(()=>{"use strict";async function t(t,e,a=0){return console.log("anim"),new Promise((o=>{t.style.setProperty("--animate-delay",`${a}ms`),t.classList.add("animate__animated",e),t.addEventListener("animationend",(function a(n){n.stopPropagation(),t.classList.remove("animate__animated",e),t.style.removeProperty("--animate-delay"),t.style.opacity="1",t.removeEventListener("animationend",a),o()}),{once:!0})}))}function e(t,e){let a=document.querySelector(".futureForecastWrapper");function o(o){let n=a.querySelector(`.day${o}Wrapper`);n.querySelector(".date").textContent=t[o].date;let c=n.querySelector(`#day${o}temp`),r=n.querySelector(`#night${o}temp`);const i="C"===e?"dayTC":"dayTF",d="C"===e?"nightTC":"nightTF";c.textContent=`${t[o][i]} °${e}`,r.textContent=`${t[o][d]} °${e}`;let y=n.querySelector(".icon");!async function(t,e){try{let a="https:"+t,o=await fetch(a,{mode:"cors"});e.style.backgroundImage=`url(${o.url})`,e.style.backgroundRepeat="no-repeat",e.style.backgroundSize="cover"}catch(t){console.error("Произошла ошибка:",t)}}(t[o].icon,y)}a.style.display="flex";for(let t=0;t<=2;t++)o(t)}function a(t,e){let a=document.querySelector(".todayForecastWrapper");a.style.display="flex",a.querySelector("#cityName").textContent=t.city+", ",a.querySelector("#country").textContent=t.country,a.querySelector("#todaysDate").textContent=t.localtime,a.querySelector("#conditionText").textContent=t.condition;let o=a.querySelector(".icon");var n;!async function(t){try{let e="https:"+t,a=await fetch(e,{mode:"cors"});o.style.backgroundImage=`url(${a.url})`,o.style.backgroundRepeat="no-repeat",o.style.backgroundSize="cover"}catch(t){console.error("Произошла ошибка:",t)}}(t.icon),a.querySelector("#humidity").textContent="Humidity: "+t.humidity+" %",a.querySelector("#windKPH").textContent="Wind: "+t.windKPH+" kph",a.querySelector("#cloudness").textContent="Cloudness: "+(0===(n=t.cloud)?"Clear":n<=25?"Little cloudy":n<=50?"Partly cloudy":n<=85?"Cloudy":"Mainly cloudy");let c="C"===e?"tempC":"tempF";a.querySelector("#todaysTemperature").textContent=`${t[c]} °${e}`}let o=document.getElementById("citySearch");const n=document.querySelector(".mainCardWrapper"),c=document.querySelector(".todayForecastWrapper"),r=document.querySelector(".futureForecastWrapper");let i=!1,d=o.querySelector("#cityInput");o.addEventListener("submit",(async function(o){o.preventDefault(),await async function(t){let o=await async function(t){let e=await async function(t){try{let e="https://api.weatherapi.com/v1/current.json?key=d1daec9ddc01455f82a220024232608&q="+t,a=await fetch(e,{mode:"cors"}),o=await a.json();if(!a.ok)throw new Error("Произошла ошибка: "+a.status);return o}catch(t){console.error("Произошла ошибка:",t),alert("Unknown location")}}(t),a=await async function(t){try{let e="https://api.weatherapi.com/v1/forecast.json?key=d1daec9ddc01455f82a220024232608&q="+t+"&days=3",a=await fetch(e,{mode:"cors"}),o=await a.json();if(!a.ok)throw new Error("Произошла ошибка: "+a.status);return o}catch(t){console.error("Произошла ошибка:",t)}}(t);return[e,a]}(t),n=function(t){let e={};return e.city=t.location.name,e.country=t.location.country,e.localtime=t.location.localtime,e.condition=t.current.condition.text,e.humidity=t.current.humidity,e.tempC=t.current.temp_c,e.tempF=t.current.temp_f,e.windKPH=t.current.wind_kph,e.cloud=t.current.cloud,e.icon=t.current.condition.icon,e}(o[0]),c=function(t){let e=[{},{},{}];return e[0].date=t.forecast.forecastday[0].date,e[0].dayTC=t.forecast.forecastday[0].day.maxtemp_c,e[0].dayTF=t.forecast.forecastday[0].day.maxtemp_f,e[0].nightTC=t.forecast.forecastday[0].day.mintemp_c,e[0].nightTF=t.forecast.forecastday[0].day.mintemp_f,e[0].icon=t.forecast.forecastday[0].day.condition.icon,e[1].date=t.forecast.forecastday[1].date,e[1].dayTC=t.forecast.forecastday[1].day.maxtemp_c,e[1].dayTF=t.forecast.forecastday[1].day.maxtemp_f,e[1].nightTC=t.forecast.forecastday[1].day.mintemp_c,e[1].nightTF=t.forecast.forecastday[1].day.mintemp_f,e[1].icon=t.forecast.forecastday[1].day.condition.icon,e[2].date=t.forecast.forecastday[2].date,e[2].dayTC=t.forecast.forecastday[2].day.maxtemp_c,e[2].dayTF=t.forecast.forecastday[2].day.maxtemp_f,e[2].nightTC=t.forecast.forecastday[2].day.mintemp_c,e[2].nightTF=t.forecast.forecastday[2].day.mintemp_f,e[2].icon=t.forecast.forecastday[2].day.condition.icon,e}(o[1]);a(n,"F"),e(c,"F"),function(t,o){let n="F",c=document.getElementById("changeTempUnit");c.addEventListener("click",(function(){"F"==n?(n="C",c.textContent="to Fahrenheit"):"C"==n&&(n="F",c.textContent="to Celsius"),a(t,n),e(o,n)}))}(n,c)}(d.value),i=!1,n.classList.remove("open"),n.classList.toggle("open"),await async function(){i||(i=!0,await t(c,"animate__fadeInDown",150),await t(r,"animate__fadeInDown",150))}()}))})();
//# sourceMappingURL=main.js.map